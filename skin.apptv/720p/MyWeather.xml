<?xml version="1.0" encoding="UTF-8"?>
<window>
	<defaultcontrol always="true">6000</defaultcontrol>
	<allowoverlay>no</allowoverlay>
	<controls>
		<control type="group"><!-- Weather screen background image -->
			<control type="image"><!-- Solid background -->
				<include>fullscreenimage</include>
				<texture>background.png</texture>
				<aspectratio>stretch</aspectratio>
				<visible>IsEmpty(Skin.String(background-custom))</visible>
			</control>
			<control type="image"><!-- Custom background -->
				<include>fullscreenimage</include>
				<texture>$INFO[Skin.String(background-custom)]</texture>
				<aspectratio>stretch</aspectratio>
				<visible>!IsEmpty(Skin.String(background-custom))</visible>
			</control>
			<control type="group">
				<control type="group">
					<visible>Window.IsActive(weather) + !IsEmpty(Skin.String(background-customweather)) + [!Player.HasVideo | !Player.HasAudio]</visible>
					<control type="multiimage"><!-- Use Custom weather condition backgrounds if location selected -->
						<include>fullscreenimage</include>
						<imagepath background="true">$INFO[Skin.String(background-customweather)]$INFO[Window(Weather).Property(Current.FanartCode)]</imagepath>
						<aspectratio>scale</aspectratio>
						<timeperimage>5000</timeperimage>
						<randomize>true</randomize>
						<fadetime>400</fadetime>
					</control>
				</control>
				<control type="group">
					<visible>Skin.HasSetting(background-playingmedia)</visible>
					<control type="group">
						<visible>Player.HasVideo</visible>
						<control type="videowindow">
							<include>fullscreenimage</include>
						</control>
					</control>
					<control type="visualisation">
						<include>fullscreenimage</include>
						<visible>Player.HasAudio</visible>
					</control>
				</control>
				<control type="group">
					<visible>Skin.HasSetting(background-slideshow) + Player.HasAudio + IsEmpty(Window(VideoLibrary).Property(PlayingBackgroundMedia))</visible>
					<control type="image"><!-- Mask out any backgrounds showing around ArtistSlideshow Fanart -->
						<include>fullscreenimage</include>
						<texture>colours/black.png</texture>
						<aspectratio>stretch</aspectratio>
					</control>
					<control type="multiimage"><!-- Backgroung ArtistSlideshow fanart image -->
						<include>fullscreenimage</include>
						<imagepath background="true">$INFO[Window(Visualisation).Property(ArtistSlideshow)]</imagepath>
						<aspectratio>keep</aspectratio>
						<timeperimage>5000</timeperimage>
						<fadetime>400</fadetime>
						<randomize>true</randomize>
					</control>
				</control>
			</control>
			<control type="image"><!-- Mask to fade background -->
				<include>fullscreenimage</include>
				<texture>colours/black.png</texture>
				<colordiffuse>mask-background</colordiffuse>
				<aspectratio>stretch</aspectratio>
				<include>background-fade</include>
				<visible>!IsEmpty(Skin.String(background-customweather)) | Skin.HasSetting(background-playingmedia) | Skin.HasSetting(background-slideshow)</visible>
			</control>
		</control>

		<control type="button" id="6000"><!-- Fake button to steal focus, don't show if Open weather map screen is showing -->
			<onleft>9000</onleft>
			<onright>noop</onright>
			<texturefocus>-</texturefocus>
			<texturenofocus>-</texturenofocus>
			<onclick>noop</onclick>
			<visible>![StringCompare(Skin.String(weather-view),$LOCALIZE[33035]) + SubString(Weather.plugin,weather.openweathermap.extended)]</visible>
		</control>

		<control type="label"><!-- Weather heading label -->
			<left>946</left>
			<top>50</top>
			<width>314</width>
			<height>32</height>
			<label>$LOCALIZE[31032]</label>
			<font>font18</font>
		</control>

		<control type="group">
			<visible>Weather.IsFetched</visible>
			<control type="group">
				<visible>!IsEmpty(Window(Weather).Property(WeatherProviderLogo))</visible>
				<control type="image"><!-- Weather provider logo -->
					<left>18</left>
					<top>3</top>
					<width>180</width>
					<height>45</height>
					<colordiffuse>DropShadow</colordiffuse>
					<aspectratio>keep</aspectratio>
					<texture>$INFO[Window(Weather).Property(WeatherProviderLogo)]</texture>
				</control>
				<control type="image"><!-- Weather provider logo (shadow) -->
					<left>17</left>
					<top>2</top>
					<width>180</width>
					<height>45</height>
					<aspectratio>keep</aspectratio>
					<texture>$INFO[Window(Weather).Property(WeatherProviderLogo)]</texture>
				</control>
			</control>
			<control type="label"><!-- Weather provider label -->
				<left>17</left>
				<top>2</top>
				<width>636</width>
				<height>20</height>
				<font>font11</font>
				<label>$INFO[Window(Weather).Property(WeatherProvider),$LOCALIZE[31536] - ]</label>
				<visible>IsEmpty(Window(Weather).Property(WeatherProviderLogo))</visible>
			</control>
			<control type="label"><!-- Weather location label -->
				<left>17</left>
				<top>50</top>
				<width>636</width>
				<height>37</height>
				<font>font13</font>
				<include condition="Skin.HasSetting(text-autoscroll)">scrolltext</include>
				<label>$INFO[Window(Weather).Property(Location)]</label>
			</control>
		</control>

		<include file="Includes_Weather.xml">standardweather</include>
		<include condition="SubString(Weather.plugin,weather.ozweather)" file="Includes_Weather.xml">ozweather</include>
		<include condition="SubString(Weather.plugin,weather.openweathermap.extended)" file="Includes_Weather.xml">openweatherextended</include>

		<control type="label"><!-- Update label -->
			<left>900</left>
			<top>685</top>
			<width>370</width>
			<height>25</height>
			<font>font10</font>
			<align>right</align>
			<label>$LOCALIZE[31531] $INFO[Window(Weather).Property(Updated)]</label>
		</control>

		<control type="group"><!-- Screen-settings Menu -->
			<left>0</left>
			<top>720</top>
			<include>screen-settings</include>
			<include>fadebackground</include>
			<control type="image"><!-- Button background -->
				<left>390</left>
				<top>120</top>
				<width>496</width>
				<height>414</height>
				<texture border="8">button-menu-background.png</texture>
			</control>
			<control type="label"><!-- Dialog heading -->
				<left>400</left>
				<top>130</top>
				<width>476</width>
				<height>34</height>
				<font>font12</font>
				<label>$LOCALIZE[31557]</label>
				<align>center</align>
			</control>
			<control type="button"><!-- Touch Close button -->
				<left>864</left>
				<top>112</top>
				<width>32</width>
				<height>32</height>
				<texturefocus>touch-close.png</texturefocus>
				<texturenofocus>touch-close.png</texturenofocus>
				<onclick condition="!StringCompare(Window(Home).Property(ShowScreenSettings),show)">SetProperty(ShowScreenSettings,show,Home)</onclick>
				<onclick condition="StringCompare(Window(Home).Property(ShowScreenSettings),show)">ClearProperty(ShowScreenSettings,Home)</onclick>
				<visible>System.GetBool(input.enablemouse)</visible>
			</control>
			<control type="image">
				<left>400</left>
				<top>166</top>
				<width>476</width>
				<height>4</height>
				<texture>separator.png</texture>
			</control>
			<control type="grouplist" id="9000">
				<left>400</left>
				<top>172</top>
				<width>476</width>
				<height>350</height>
				<itemgap>0</itemgap>
				<onright>6000</onright>
				<onleft>6000</onleft>
				<control type="button" id="200"><!-- View (types of forecasts) -->
					<width>476</width>
					<height>50</height>
					<label>$LOCALIZE[31562] $INFO[Skin.String(weather-view)]</label>
					<onclick>$VAR[WeatherView]</onclick>
				</control>
				<control type="spincontrolex" id="3"><!-- Change location button -->
					<width>476</width>
					<height>50</height>
					<label>$LOCALIZE[21873] - </label>
				</control>
				<control type="button" id="2"><!-- Refresh button -->
					<width>476</width>
					<height>50</height>
				</control>
				<control type="button" id="208"><!-- Custom Weather Backgrounds Button -->
					<width>476</width>
					<height>50</height>
					<label>$LOCALIZE[31866]</label>
					<onclick>SetFocus(6000)</onclick>
					<onclick>SetProperty(SelectDialogType,weatherbackgrounds,Home)</onclick>
					<onclick>ActivateWindow(1154)</onclick>
				</control>
				<control type="button" id="209"><!-- Custom Weather Icons Button -->
					<width>476</width>
					<height>50</height>
					<label>$LOCALIZE[31873]</label>
					<onclick>SetFocus(6000)</onclick>
					<onclick>SetProperty(SelectDialogType,weathericons,Home)</onclick>
					<onclick>ActivateWindow(1154)</onclick>
				</control>
				<control type="radiobutton" id="210"><!-- Alerts  -->
					<width>476</width>
					<height>50</height>
					<label>$LOCALIZE[33050]</label>
					<onclick>Skin.ToggleSetting(weather-alerts)</onclick>
					<selected>Skin.HasSetting(weather-alerts)</selected>
					<radioposx>440</radioposx>
					<enable>SubString(Weather.plugin,weather.openweathermap.extended)</enable>
				</control>
				<control type="button" id="4"><!-- Settings button -->
					<width>476</width>
					<height>50</height>
					<label>$LOCALIZE[10014]</label>
					<onclick>ActivateWindow(weathersettings)</onclick>
					<onclick>Skin.SetString(weather-view,$LOCALIZE[10508])</onclick>
				</control>
			</control>
		</control>

		<control type="grouplist"><!-- Show indicator at top of screen to show there is a hidden menu -->
			<left>592</left>
			<top>0</top>
			<width>96</width>
			<height>32</height>
			<orientation>horizontal</orientation>
			<visible>!Skin.HasSetting(lock-screensettings)</visible>
			<control type="image">
				<width>32</width>
				<height>32</height>
				<texture>groupfocused.png</texture>
				<visible>[ControlGroup(9000).HasFocus() | StringCompare(Window(Home).Property(ShowScreenSettings),show)] + !Skin.HasSetting(lock-screensettings)</visible>
			</control>
			<control type="image">
				<width>32</width>
				<height>32</height>
				<texture>groupunfocused.png</texture>
				<visible>![ControlGroup(9000).HasFocus() | StringCompare(Window(Home).Property(ShowScreenSettings),show)] + !Skin.HasSetting(lock-screensettings)</visible>
			</control>
			<control type="image">
				<width>32</width>
				<height>32</height>
				<texture>groupfocused.png</texture>
				<visible>![ControlGroup(9000).HasFocus() | StringCompare(Window(Home).Property(ShowScreenSettings),show) | Control.HasFocus(1250) | Control.HasFocus(1252) | Control.HasFocus(1253) | Control.HasFocus(1258)]</visible>
			</control>
			<control type="image">
				<width>32</width>
				<height>32</height>
				<texture>groupunfocused.png</texture>
				<visible>[ControlGroup(9000).HasFocus() | StringCompare(Window(Home).Property(ShowScreenSettings),show) | Control.HasFocus(1250) | Control.HasFocus(1252) | Control.HasFocus(1253) | Control.HasFocus(1258)]</visible>
			</control>
		</control>

		<include>touch-controls</include>

	</controls>
</window>
